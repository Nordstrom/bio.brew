#!/bin/bash
#
# vim: set ft=bash
set -e

MAIN_DIR="$(pwd)/$(dirname $(which $0))/.."
load_files=(common.sh install.sh list.sh remove.sh usage.sh)
for f in ${load_files[@]}
do
  source $MAIN_DIR/lib/$f
done

while getopts 'vh' OPTION
do
  case $OPTION in
    v) 
      version
      ;;
    h)
      usage 0
      ;;
    ?)
      usage 1 "Option not supported."
      ;;
  esac 
done
shift $(($OPTIND - 1))


[[ $# -ne 1 && $# -ne 2 ]] && usage 1
action=$1
recipe=$2

case $action in
  "list")
    bb_list
    ;;
  "install")
    [ ".$recipe" == "." ] && usage 1 "I need a recipe."
    bb_install $recipe  
    ;;
  "remove")
    [ ".$recipe" == "." ] && usage 1 "I need a recipe."
    bb_remove $recipe
    ;;
  *)
    usage 1
    ;;
esac
